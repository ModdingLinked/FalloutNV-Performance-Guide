<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Performance Guide</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A guide to making Fallout New Vegas and Oblivion run smoother. Hopefully.">
    <meta property="og:title" content="Performance Guide">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://performance.moddinglinked.com">
    <meta property="og:image" content="https://performance.moddinglinked.com/ui/logo.webp">
    <meta property="og:description" content="A guide to making Fallout New Vegas and Oblivion run smoother. Hopefully.">
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f3f3f3">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#202020">
    <meta name="keywords" content="Fallout New Vegas, FNV, FalloutNV, FPS, Performance, Fallout, FPS Limit, SpecialK, Riva Tuner, RTSS, Stutter, Lag, Latency, Hitches, Flip Model, DXGI, Interop, Nvidia, HDR, FO4, SSE, Fallout 4, Skyrim Special Edition, Skyrim">
    <link rel="icon" type="image/x-icon" href=".\favicon.webp">
    <script src="https://kit.fontawesome.com/baff4f2fd4.js" crossorigin="anonymous"></script>
    <script src="javascript.js"></script>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="css/styles.css">
    <meta http-equiv='content-language' content='en-us'>
    <link rel="canonical" href="https://performance.moddinglinked.com">
</head>

<body class="theme dark-scheme">
    <div style="overflow:auto">
        <div class="header" id="header" onclick="toggleNav()">
            <span class="flippy" id="flippyHeader">üôÉ</span>
        </div>
        <div class="sidebar" id="sidebar">
            <p>
                <a href="#Introduction" title="üôÉ Introduction">
                    <span class="subIcon">üëã</span>
                    <span class="flippy">üôÉ</span>
                    Introduction
                </a>

                <a href="#Terminology" title="üôÉ Terminology">
                    <span class="subIcon">üìñ</span>
                    <span class="flippy">üôÉ</span>
                    Terminology
                </a>

                <a href="#DriversAndOS" title="üôÉ Graphics Drivers and Windows">
                    <span class="subIcon">ü™ü</span>
                    <span class="flippy">üôÉ</span>
                    Drivers and Windows
                </a>

                <hr>

                <a href="./fnv.html" title="üôÉ FNV">
                    <span class="subIcon">üåµ</span>
                    <span class="flippy">üôÉ</span>
                    Fallout New Vegas
                </a>

                <a href="./tes4.html" title="üôÉ TES4">
                    <span class="subIcon">‚öîÔ∏è</span>
                    <span class="flippy">üôÉ</span>
                    Oblivion
                </a>

                <a href="./fnvresults.html" title="üôÉ FNV Results">
                    <span class="subIcon">üöó</span>
                    <span class="flippy">üôÉ</span>
                    FNV Testing Results
                </a>

                <a href="./fo4results.html" title="üôÉ FO4 Results">
                    <span class="subIcon">üöô</span>
                    <span class="flippy">üôÉ</span>
                    FO4 Testing Results
                </a>

                <hr>

                <a href="#Appendix" title="üôÉ Finish">
                    <span class="subIcon">üèÅ</span>
                    <span class="flippy">üôÉ</span>
                    Appendix
                </a>
            </p>
        </div>
        <div class="content">

            <!-- Introduction -->
            <div>
                <span id="Introduction" onclick="location.href='#Introduction'">
                    <h2>Introduction</h2>
                </span>
                <div class="card flex">
                    <div>
                        <p>
                        <h3>Welcome!</h3>
                        The goal of this guide is to fix the abysmal performance in Fallout New Vegas and Oblivion games by using more modern technologies and tweaks, while also providing all the information you need to understand the root cause of the issue and what the solution does.
                        </p>
                        <p>
                            This home page will cover all the general information that can be shared across the 2 games. Once you are done reading this page, choose the game you are modding on the sidebar.
                        </p>
                        <p>
                            We also regularly test the performance of upcoming and/or popular mods, this will hopefully shed some light onto the huge amount of placebo and bad information floating around these games. All of the logging results gathered by me and VishVadeva are linked on the sidebar.
                        </p>
                    </div>
                    <div>
                        <img src="ui/logo.webp" id="logo" alt="Logo of a Vault-Boy with glasses typing on a computer">
                    </div>
                </div>
                <div class="card">
                    <p>
                    <h3>Why the bad performance?</h3>
                    </p>
                    <p>
                        Fallout and TES titles are always known for their horrible performance. In older games such as Fallout New Vegas and Oblivion, this is mostly due to the now 20 years old DirectX 9, which fails to fit-in with modern systems and Windows. It's extremely inefficient and CPU bound, has glaring issues with display modes, memory handling and overall stability.
                    </p>
                    <p>
                        But even once we move onto more recent titles using DirectX 11, they all still share the lackluster optimizations. To make things worse, Fallout New Vegas specifically was compiled without compiler opimizations enabled.
                    </p>
                    <p>
                        In short, most performance issues can be summed up with two words: <b>CPU bottleneck</b>.
                    </p>
                </div>
            </div>

            <!-- Terminology -->
            <div>
                <span id="Terminology" onclick="location.href='#Terminology'">
                    <h2>Terminology</h2>
                </span>
                <div class="card">
                    <h3>Things You Should Know</h3>
                    <ul>
                        <li id="VSync">
                            <b>Vertical Synchronization (V-Sync)</b> - allows keeping the display's scanout and refresh in phase to prevent screen tearing at the cost of higher latency (latency lowers along with refresh rate).
                        </li>
                        <li id="VRR">
                            <b>G-Sync | Freesync</b> - <b>Variable Refresh Rate (VRR)</b> developed by NVIDIA and AMD respectively. They allow the display to adapt its refresh rate to the current framerate, allowing you to use V-Sync at arbitrary framerates and reduce its latency<sup><a title="Why?" href="#annotation1">[1]</a></sup> .
                        </li>
                        <li id="MPO">
                            <b>Multiplane Overlays (MPOs)</b> - hardware scanout planes for the GPU. They allow for hardware image composition without any latency or performance penalty (for example displaying windows on top of each other), as well as their hardware scaling and stretching. MPOs are supported since Windows 8.1. Hardware capabilities vary between GPU manufacturers and the respective architectures.
                        </li>
                    </ul>
                    <span class="annotations">
                        <ol>
                            <li id="annotation1">
                                Yes, despite popular misinformation, VRR alone does <b>NOT</b> get rid of tearing. It can minimize the rolling tear however, but that varies between displays, and such, it's not a guaranteed feature.
                                Additionally, the latency reduction applies <b>only</b> at framerates below V-Sync window (display's native refresh rate) - if framerate matches the native refresh rate, VRR engages V-Sync emulation.
                            </li>
                        </ol>
                    </span>
                </div>
                <div class="expander-top clickable" onclick="expandCard(this, flipTalk)" id="flipTalkTop">
                    <p>
                    <h3>Technicalities</h3>
                    More text inside. Explains the concept of presentation models and display modes. While not needed to use the guide, it'll help you with understanding why things are the way they are.
                    <img class="chevron" style="float: right;" src="ui/Chevron Down.svg" alt="UI element - Chevron">
                    </p>
                </div>
                <div class="expander-bottom" id="flipTalk">
                    <p>
                    <ul>
                        <li><b>Presentation models:</b></li>
                        <ul>
                            <li id="Flip">
                                <b>Flip Model</b> - presentation model first added in Windows 7 with D3D9Ex and upgraded in DXGI with Windows 8-10.
                                <br>
                                Allows "fullscreen-level" of performance and latency. Has native VRR support in Windowed Mode. Additionally, DXGI version supports tearing (V-Sync off) in Windowed Mode, HDR and has Multiplane Overlay (MPO) support.
                                <br>
                                DXGI variant is supported only in D3D10 and upwards<sup><a title="Why?" href="#annotation2">[2]</a></sup>, enforced only in D3D12, and exists only on Windows 8 and upwards.
                                <br>
                                D3D9Ex Flip Model is not feature matched and lacks any DXGI improvements.
                                <br>
                                More information <a href="https://devblogs.microsoft.com/directx/dxgi-flip-model/" target="_blank">here</a>.
                            </li>
                            <li id="BitBlt">
                                <b>BitBlt Model</b> - older presentation model used by most applications. While performing similarly to Flip Model in Fullscreen, in Windowed Mode it has worse performance and always-on V-Sync on top of already additional latency caused by additional copy operations due to being software composed.
                                <br>
                                The only presentation model for Windowed D3D9 (and lower), but still very common in D3D10 and D3D11 games.
                                <p>
                                    Vulkan and OpenGL<sup><a title="Why?" href="#annotation3">[3]</a></sup> use BitBlt in Windowed Mode.
                                </p>
                            </li>
                        </ul>
                        <li>
                            <b>Display modes:</b>
                        </li>
                        <ul>
                            <li id="FSE">
                                <b>Fullscreen Exclusive (FSE)</b> - legacy method of displaying content where application takes complete ownership of the screen. Has slow Alt-Tab due to display ownership transfer, can be problematic if games are badly coded and switch to odd resolutions or refresh rates by default. Can lose color profiles. Despite that, it offers the best feature compatibility and perfomance for games that don't use Flip Model.
                                <br>
                                Deprecated by Fullscreen Optimizations and Windowed with Flip Model for DirectX games.
                                <br>
                                Supported by every graphics API other than D3D12.
                            </li>
                            <li id="FSO">
                                <b>Fullscreen with Fullscreen Optimizations (Fullscreen Optimizations)</b> - an update to <span title="Fullscreen Exclusive" onclick="expandCard(flipTalkTop, flipTalk, 1); location.href='#Flip'">FSE</span> for DirectX added in Windows 10 1803.
                                <br>
                                Converts DirectX applications running in <span title="Fullscreen Exclusive" onclick="expandCard(flipTalkTop, flipTalk, 1); location.href='#Flip'">FSE</span> mode into a pseudo borderless mode with Flip Model for faster Alt-Tab,
                                lower latency, better color profile handling, and support for Windowed overlays (Xbox Game Bar, volume and brightness sliders etc.).
                                <br>
                                Because of being a Windowed Mode under the hood, it can break e.g. brightness control in old games that modify system gamma instead of window's.
                                <br>
                                Enabled by default for every application.
                                <br>
                                More information <a href="https://devblogs.microsoft.com/directx/demystifying-full-screen-optimizations/" target="_blank">here</a>.
                            </li>
                            <li id="Windowed">
                                <b>Windowed</b> - method of displaying content in a window, always managed by DWM. Due to being a window, Alt-Tab is fast, and color profiles usually don't have any problems.
                                If not using Flip Model, it has worse performance compared to Fullscreen Optimizations | <span title="Fullscreen Exclusive" onclick="expandCard(flipTalkTop, flipTalk, 1); location.href='#Flip'">FSE</span>, lacks native VRR support, has increased input latency and uses always-on V-Sync.
                            </li>
                        </ul>
                    </ul>
                    <span class="annotations">
                        <ol start="2">
                            <li id="annotation2">
                                D3D10 and D3D11 supporting Flip Model doesn't mean that games using those API's will always have Flip Model enabled (Unity and UE4 implemented Flip Model support around 2019 - 7 years after its release!).
                                <br>
                                Flip Model in Windowed Mode can be enabled in those games using Special K (D3D11 only) or Windows 11's (22H2) Optimizations for Windowed Games (both D3D10 and D3D11).
                            </li>
                            <li id="annotation3">
                                OpenGL can be displayed using D3D11 thanks to Special K, which enables Flip Model and all its benefits along with HDR.
                                <br>
                                Nvidia drivers can also interop Vulkan and OpenGL to DXGI with Flip Model since driver version 526, albeit as the time of writing, OpenGL interop degrades performance compared to Special K's one,
                                while DXVK compatibility requires toggling a flag in Nvidia Profile Inspector - see <a href="#dxvk-flip">here</a>.
                            </li>
                        </ol>
                    </span>
                    </p>
                </div>
            </div>

            <!-- Drivers and Windows-->
            <div>
                <span id="DriversAndOS" onclick="location.href='#DriversAndOS'">
                    <h2>Graphics Drivers and Windows</h2>
                </span>
                <div class="card">
                    <p>
                    <h3>Driver Updates</h3>
                    Not much to say here - for the best compatibility and performance, you <b>must</b> be using the newest driver for your graphics card.
                    <div class="card-red">
                        <p>
                        <h3>This step is mandatory if you want to use DXVK!</h3>
                        </p>
                    </div>
                    You can check what GPU you have by opening Task Manager, and going to the Performance tab - the last GPU on the left pane is your dedicated one. If you don't see any GPU there, that means your GPU is too old to use DXVK.
                    <table class="center" style="width: 100%; height: 96px;">
                        <tr>
                            <th colspan="3">
                                <h3 class="center">Select your graphics card to go the driver download page</h3>
                            </th>
                        </tr>
                        <tr>
                            <th>
                                <a href="https://www.nvidia.com/download/index.aspx" target="_blank">
                                    <button class="button-big" id="nvidiaButton">
                                        <b>
                                            NVIDIA
                                        </b>
                                    </button>
                                </a>
                            </th>
                            <th>
                                <a href="https://www.amd.com/en/support" target="_blank">
                                    <button class="button-big" id="amdButton">
                                        <b>
                                            AMD
                                        </b>
                                    </button>
                                </a>
                            </th>
                            <th>
                                <a href="https://www.intel.com/content/www/us/en/download/19344/intel-graphics-windows-dch-drivers.html" target="_blank">
                                    <button class="button-big" id="intelButton">
                                        <b>
                                            INTEL
                                        </b>
                                    </button>
                                </a>
                            </th>
                        </tr>
                    </table>
                    </p>
                </div>
                <div class="card">
                    <p>
                    <h3>Windows Watermark</h3>
                    <p>
                    <div class="card-yellow">
                        <p>
                            This part applies only to <b>D3D9 with Fullscreen Optimizations</b> and <b>DXVK with DXGI</b>, since D3D9 Windowed is already in the DWM composed mode, and DXVK uses <span title="Fullscreen Exclusive" onclick="expandCard(flipTalkTop, flipTalk, 1); location.href='#Flip'">FSE</span>.
                            <br>
                            You can ignore this section if you have following GPUs:
                        <ul>
                            <li>Nvidia 16 series and newer</li>
                            <li>AMD Vega and newer</li>
                            <li>Intel CPUs 8th Gen and newer</li>
                        </ul>
                        </p>
                    </div>
                    </p>
                    <p>
                        Make sure your Windows is activated, otherwise the watermark will kick the game into the DWM composition, which leads to increased latency, worse performance and disables VRR.
                        <br>
                        If you don't have a GPU with <a href="#Terminology">MPO (Multiplane Overlay)</a> support, you can mitigate this by disabling Fullscreen Optimizations (this trick won't work on modern, D3D12 games, so it's still recommended to just activate Windows).
                        <br>
                        <br>
                        How to check if your GPU supports MPOs:
                    <ol>
                        <li>
                            Type <b class="card-basic">dxdiag</b> into Windows search
                        </li>
                        <li>
                            Click <b>Save All Information</b> and save the file.
                        </li>
                        <li>
                            Open the <b class="card-basic">DxDiag.txt</b> file, press <b class="card-basic">Ctrl+F</b> and look for <b class="card-basic">MPO MaxPlanes</b>
                        </li>
                        <li>
                            If the number is <b>greater than 1</b>, then your GPU has MPO support.
                        </li>
                    </ol>
                    </p>
                    <p>
                    <div class="card-red">
                        <p>
                            Having the watermark without MPOs will disable VRR and increase latency and stuttering!
                        </p>
                    </div>
                    </p>
                    </p>
                </div>
                <div class="card">
                    <p>
                    <h3>Virtualization</h3>
                    Windows 11 uses virtualization features to increase system and inter-process security. Unfortunately, this can come at a performance cost, especially on lower-end hardware.
                    <br>
                    I won't be writing on how to disable them, because... <a href="https://support.microsoft.com/en-us/windows/options-to-optimize-gaming-performance-in-windows-11-a255f612-2949-4373-a566-ff6f3f474613" target="_blank">Microsoft already made a tutorial about it</a>.
                    <br>
                    <br>
                    This step is not mandatory, as when it comes to security, it's up to you to decide. Just letting you know that this exists, and even Microsoft acknowledges the fact that it can degrade perfomance.
                    </p>
                </div>
                <div class="card">
                    <p>
                    <h3>Game Mode</h3>
                    Windows 10 introduced a feature called <a href="ms-settings:gaming-gamemode">Game Mode</a>, which puts the system in a more gaming-friendly state.
                    </p>
                    <p>
                        Game Mode features:
                    <ul>
                        <li>
                            Disables Windows Update.
                        </li>
                        <li>
                            Disables notifications.
                        </li>
                        <li>
                            Disables file indexing, if "Respect Device Power Mode Settings" is enabled in <a href="ms-settings:search">Search settings</a>.
                        </li>
                        <li>
                            Sets Game Mode power mode (requires <a href="ms-settings:powersleep">Balanced power plan</a> to be active).
                        </li>
                        <li>
                            Enables CPU scheduling optimizations for Ryzen CPUs.
                        </li>
                    </ul>
                    </p>
                    <p>
                        Game Mode is enabled by default. If you had it disabled for some reason, you can enable it <a href="ms-settings:gaming-gamemode">here</a>.
                    </p>
                </div>
            </div>

            <!-- Finish -->
            <div>
                <span id="Appendix" onclick="location.href='#Appendix'">
                    <h2>Appendix</h2>
                </span>
                <div class="card">
                    <p>
                        If you have any issues, questions, critiques or recommendations hit me up on Discord - wall_sogb.
                        <br>
                        You can also find me on the <a href="https://discord.gg/moddinglinked" target="_blank">ModdingLinked</a>, <a href="https://discord.gg/EebN93s" target="_blank">xNVSE</a>, <a href="https://discord.gg/taleoftwowastelands" target="_blank">Tale of Two Wastelands</a> servers.
                        <br>
                        <br>
                        I recommend checking this guide from time to time - I'm not done yet.
                        <br>
                        <br>
                        If you found this guide helpful, share it with others or support me on <a href="https://ko-fi.com/wall_sogb" target="_blank">Ko-Fi</a> or <a href="https://patreon.com/WallSoGB" target="_blank">Patreon</a>.
                    </p>
                </div>
                <div class="card">
                    <p>
                    <h3>Things Worth Reading</h3>
                    Here are some links to stuff that I recommend checking out:
                    <ul>
                        <li>
                            <a href="https://www.pcgamingwiki.com/wiki/Home" target="_blank">PCGamingWiki</a> - Great website, contains really helpful info about games, patches, fixes and other PC gaming related stuff.
                        </li>
                        <li>
                            <a href="https://blurbusters.com/" target="_blank">BlurBusters</a> - Amazing website by Mark Rejhon focused on displays, latency and image quality. Really worth checking it out if you are a geek for these things.
                        </li>
                        <li>
                            <a href="https://salamand3r.fail/texture-guide" target="_blank">Salamand3r's Texture Guide</a> - For Fallout New Vegas and Tale of Two Wastelands players, this is nice and easy to follow texture guide by Salamand3r that actually doesn't break your game for a nice change of pace.
                        </li>
                    </ul>
                    </p>
                </div>
                <div class="card">
                    <p>
                    <h3>Credits</h3>
                    This is the part where I'd like to thank people who have helped me in whatever way making this guide possible.
                    <ul>
                        <li>
                            The whole xNVSE server for being a great community, especially the following:
                            <ul>
                                <li>
                                    <a href="https://www.nexusmods.com/users/98644723" target="_blank">VishVadeva</a> - for testing and helping with benchmarks.
                                </li>
                                <li>
                                    <a href="https://c6-dev.github.io/" target="_blank">c6</a> - for fixing the some engine functions so my testing could be easier.
                                </li>
                                <li>
                                    <a href="https://www.nexusmods.com/newvegas/users/53377026" target="_blank">LOC (aka ItsMeJesusHChrist)</a> - for making the awesome logo for the guide.
                                </li>
                                <li>
                                    Nice try <a href="https://www.nexusmods.com/newvegas/users/31254295" target="_blank">karut</a>, but you are not getting credited.
                                </li>
                            </ul>
                        </li>
                        <li>
                            Whole <a href="http://discord.gg/specialk">Special K server</a> for also being a superb community with a lot of knowledgeable people. This guide would literally not exist without them.
                        </li>
                        <li>
                            <a href="https://www.nexusmods.com/site/users/16367674" target="_blank">Glaceon575</a> - for helping with benchmarks and providing screenshots for AMD GPUs.
                        </li>
                        <li>
                            You. <img src="ui/pepestare.webp" id="pepestare" alt="Image of Pepe the frog happily smiling and looking at the viewer">
                        </li>
                    </ul>
                    </p>
                </div>
                <div class="card">
                    <p>
                    <h3>Changelog</h3>
                    Changes are documented on the <a href="https://github.com/WallSoGB/FalloutNV-Performance-Guide/commits/main" target="_blank">commit history</a>.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <footer>I'm a footer ü¶∂<span class="Flippy">üôÉ</span>ü¶∂</footer>
</body>

</html>